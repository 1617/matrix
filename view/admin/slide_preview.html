<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Welcome to FE World~</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
    <link rel="stylesheet" href="/static/css/reveal.css">
    <link rel="stylesheet" href="/static/css/theme/<%=http.get('theme')%>.css" id="theme">

    <!-- Code syntax highlighting -->
    <link rel="stylesheet" href="/static/css/zenburn.css">

    <!-- Printing and PDF exports -->
    <script>
      var link = document.createElement( 'link' );
      link.rel = 'stylesheet';
      link.type = 'text/css';
      link.href = window.location.search.match( /print-pdf/gi ) ? '/static/css/print/pdf.css' : '/static/css/print/paper.css';
      document.getElementsByTagName( 'head' )[0].appendChild( link );
    </script>
    <script>
    /**
        Head JS     The only script in your <HEAD>
        Copyright   Tero Piirainen (tipiirai)
        License     MIT / http://bit.ly/mit-license
        Version     0.96

        http://headjs.com
    */(function(a){function z(){d||(d=!0,s(e,function(a){p(a)}))}function y(c,d){var e=a.createElement("script");e.type="text/"+(c.type||"javascript"),e.src=c.src||c,e.async=!1,e.onreadystatechange=e.onload=function(){var a=e.readyState;!d.done&&(!a||/loaded|complete/.test(a))&&(d.done=!0,d())},(a.body||b).appendChild(e)}function x(a,b){if(a.state==o)return b&&b();if(a.state==n)return k.ready(a.name,b);if(a.state==m)return a.onpreload.push(function(){x(a,b)});a.state=n,y(a.url,function(){a.state=o,b&&b(),s(g[a.name],function(a){p(a)}),u()&&d&&s(g.ALL,function(a){p(a)})})}function w(a,b){a.state===undefined&&(a.state=m,a.onpreload=[],y({src:a.url,type:"cache"},function(){v(a)}))}function v(a){a.state=l,s(a.onpreload,function(a){a.call()})}function u(a){a=a||h;var b;for(var c in a){if(a.hasOwnProperty(c)&&a[c].state!=o)return!1;b=!0}return b}function t(a){return Object.prototype.toString.call(a)=="[object Function]"}function s(a,b){if(!!a){typeof a=="object"&&(a=[].slice.call(a));for(var c=0;c<a.length;c++)b.call(a,a[c],c)}}function r(a){var b;if(typeof a=="object")for(var c in a)a[c]&&(b={name:c,url:a[c]});else b={name:q(a),url:a};var d=h[b.name];if(d&&d.url===b.url)return d;h[b.name]=b;return b}function q(a){var b=a.split("/"),c=b[b.length-1],d=c.indexOf("?");return d!=-1?c.substring(0,d):c}function p(a){a._done||(a(),a._done=1)}var b=a.documentElement,c,d,e=[],f=[],g={},h={},i=a.createElement("script").async===!0||"MozAppearance"in a.documentElement.style||window.opera,j=window.head_conf&&head_conf.head||"head",k=window[j]=window[j]||function(){k.ready.apply(null,arguments)},l=1,m=2,n=3,o=4;i?k.js=function(){var a=arguments,b=a[a.length-1],c={};t(b)||(b=null),s(a,function(d,e){d!=b&&(d=r(d),c[d.name]=d,x(d,b&&e==a.length-2?function(){u(c)&&p(b)}:null))});return k}:k.js=function(){var a=arguments,b=[].slice.call(a,1),d=b[0];if(!c){f.push(function(){k.js.apply(null,a)});return k}d?(s(b,function(a){t(a)||w(r(a))}),x(r(a[0]),t(d)?d:function(){k.js.apply(null,b)})):x(r(a[0]));return k},k.ready=function(b,c){if(b==a){d?p(c):e.push(c);return k}t(b)&&(c=b,b="ALL");if(typeof b!="string"||!t(c))return k;var f=h[b];if(f&&f.state==o||b=="ALL"&&u()&&d){p(c);return k}var i=g[b];i?i.push(c):i=g[b]=[c];return k},k.ready(a,function(){u()&&s(g.ALL,function(a){p(a)}),k.feature&&k.feature("domloaded",!0)});if(window.addEventListener)a.addEventListener("DOMContentLoaded",z,!1),window.addEventListener("load",z,!1);else if(window.attachEvent){a.attachEvent("onreadystatechange",function(){a.readyState==="complete"&&z()});var A=1;try{A=window.frameElement}catch(B){}!A&&b.doScroll&&function(){try{b.doScroll("left"),z()}catch(a){setTimeout(arguments.callee,1);return}}(),window.attachEvent("onload",z)}!a.readyState&&a.addEventListener&&(a.readyState="loading",a.addEventListener("DOMContentLoaded",handler=function(){a.removeEventListener("DOMContentLoaded",handler,!1),a.readyState="complete"},!1)),setTimeout(function(){c=!0,s(f,function(a){a()})},300)})(document)
    </script>
    <script>
      // Minified version of isMobile included in the HTML since it's small
      !function(a){var b=/iPhone/i,c=/iPod/i,d=/iPad/i,e=/(?=.*\bAndroid\b)(?=.*\bMobile\b)/i,f=/Android/i,g=/IEMobile/i,h=/(?=.*\bWindows\b)(?=.*\bARM\b)/i,i=/BlackBerry/i,j=/BB10/i,k=/Opera Mini/i,l=/(?=.*\bFirefox\b)(?=.*\bMobile\b)/i,m=new RegExp("(?:Nexus 7|BNTV250|Kindle Fire|Silk|GT-P1000)","i"),n=function(a,b){return a.test(b)},o=function(a){var o=a||navigator.userAgent,p=o.split("[FBAN");return"undefined"!=typeof p[1]&&(o=p[0]),this.apple={phone:n(b,o),ipod:n(c,o),tablet:!n(b,o)&&n(d,o),device:n(b,o)||n(c,o)||n(d,o)},this.android={phone:n(e,o),tablet:!n(e,o)&&n(f,o),device:n(e,o)||n(f,o)},this.windows={phone:n(g,o),tablet:n(h,o),device:n(g,o)||n(h,o)},this.other={blackberry:n(i,o),blackberry10:n(j,o),opera:n(k,o),firefox:n(l,o),device:n(i,o)||n(j,o)||n(k,o)||n(l,o)},this.seven_inch=n(m,o),this.any=this.apple.device||this.android.device||this.windows.device||this.other.device||this.seven_inch,this.phone=this.apple.phone||this.android.phone||this.windows.phone,this.tablet=this.apple.tablet||this.android.tablet||this.windows.tablet,"undefined"==typeof window?this:void 0},p=function(){var a=new o;return a.Class=o,a};"undefined"!=typeof module&&module.exports&&"undefined"==typeof window?module.exports=o:"undefined"!=typeof module&&module.exports&&"undefined"!=typeof window?module.exports=p():"function"==typeof define&&define.amd?define("isMobile",[],a.isMobile=p()):a.isMobile=p()}(this);
    </script>

    <!--[if lt IE 9]>
    <script src="/static/js/html5shiv.js"></script>
    <![endif]-->

    <style type="text/css">
      .reveal .slides h3,
      .reveal .slides h4{
        text-align: left;
        text-indent: 15px;
      }

      body{
        -webkit-transition: background 0.8s ease-in!important;
        transition: background 0.8s ease-in!important;
      }

      .reveal em, .reveal a{
        color: #9c0;
        font-style: normal;
      }
      .reveal a:not(.image) {
          border-bottom: 2px solid;
      }
      .reveal section img {
        background: transparent;
        border: none;
      }
    </style>
</head>
<body>
  <div class="reveal">
    <div class="slides" id="main">
    </div>
  </div>
</body>
<script src="/static/js/reveal.js"></script>
<script type="text/slide">
  <%if(typeof slide !== 'undefined'){%><%-slide.content%><%}%>
</script>

<%if(typeof slide === 'undefined'){%>
<script type="text/javascript">
  var contentEl = document.querySelector('[type="text/slide"]');
  var data = localStorage.getItem('slide_content');
  if(data){
    contentEl.innerHTML = data;
  }
</script>
<%}%>

<script type="text/javascript">
function initReveal(){
  Reveal.initialize({
    controls: true,
    progress: true,
    history: true,
    center: true,

    transition: 'slide', // none/fade/slide/convex/concave/zoom

    // Optional reveal.js plugins
    dependencies: [
      { src: '/static/js/jquery.min.js', condition: function(){ return !isMobile.any; } },
      { src: '/static/js/zepto.min.js', condition: function(){ return isMobile.any; } },
      { src: '/static/js/classList.js', condition: function() { return !document.body.classList; } },
      { src: '/static/plugin/highlight/highlight.js', condition: function() { return !!document.querySelector( 'pre code' ); }, callback: function() { hljs.initHighlightingOnLoad(); } },
      { src: '/static/plugin/zoom-js/zoom.js', async: true },
      { src: '/static/plugin/notes/notes.js', async: true },
      { src: '/static/plugin/dragonbones/dragonBones.js', condition: function() { return !!document.querySelector('[data-dragonbone]'); }, async: true},
      { src: '/static/plugin/dragonbones/createjs.js', condition: function() { return !!document.querySelector('[data-dragonbone]'); }, async: true},
      { src: '/static/plugin/dragonbones/dragonBonesCreateJS.js', condition: function() { return !!document.querySelector('[data-dragonbone]'); }, async: true},
      { src: '/static/plugin/dragonbones/dragonboneDatas.js', condition: function() { return !!document.querySelector('[data-dragonbone]'); }, async: true},
      { src: '/static/plugin/chat/socket-io.js', condition: function(){ return !!document.querySelector('[data-chat]'); } },
      { src: '/static/plugin/chat/qrcode.js', condition: function(){ return !!document.querySelector('[data-chat]'); } },
      { src: '/static/plugin/chat/chat.js', condition: function(){ return !!document.querySelector('[data-chat]'); }, async: true },
      { src: '/static/plugin/echarts/echarts.js', condition: function() { return !!document.querySelector('[data-echart]'); }, callback: function(){
          // echarts 路径配置
          require.config({
              paths: {
                  echarts: '/static/plugin/echarts'
              }
          });

          var charts = document.querySelectorAll('[data-echart]');

          for(var i = 0; i < charts.length; i++){
            var el = charts[i];
            var div = document.createElement('div');
            div.className = 'echart';
            div.style.height = '600px';
            el.appendChild(div);
          }

          Reveal.addEventListener('slidechanged', function( event ) {
            var slide = event.currentSlide;
            var isChart = slide.hasAttribute('data-echart') && !slide.getAttribute('data-echart-loaded');

            if(isChart){
              slide.setAttribute('data-echart-loaded', 1);
              var chart = slide.getAttribute('data-echart') || 'bar/dark';
              chart = chart.split('/');
              var chart_type = chart[0], theme = chart[1] || 'dark';

              if(theme){
                require(['echarts',
                  'echarts/theme/' + theme, 
                  'echarts/chart/' + chart_type], function(ec, theme){
                    if(theme){
                      theme.textStyle = theme.textStyle || {};
                      theme.textStyle.fontSize = 14;
                    }

                    var div = slide.querySelector('.echart');
                    var optionsEl = slide.querySelector('script[type="text/template"]');
                    if(optionsEl) options = (new Function('return ' + optionsEl.innerHTML.trim()))();

                    var myChart = ec.init(div, theme); 
                    // 为echarts对象加载数据 
                    setTimeout(function(){
                      myChart.setOption(options); 
                    }, 100);

                  });
              }
            }
          } );      
      } }, 
    ]
  });


  Reveal.addEventListener( 'slidechanged', function( event ) {
    // event.currentSlide, event.indexh, event.indexv
    var stage = event.currentSlide.getAttribute('data-stage');

    if(stage){
      document.body.style.backgroundColor = stage;
    }else{
      document.body.style.backgroundColor = '';
    }
  } );
}

(function(){
  var contentEl = document.querySelector('[type="text/slide"]');
  if(!contentEl){
    alert('没有要分享的内容！');
    return;
  }
  var content = contentEl.innerHTML;
  var slides = content.split(/^---/img);

  for(var i = 0; i < slides.length; i++){
    var slide = slides[i];
    var matches = /^\@(.+)/img.exec(slide);
    var dataTag = [];

    if(matches && matches[1]){
      var tags = matches[1].split(/\s*,\s*/g);

      if(tags.indexOf('html') < 0 && tags.indexOf('template') < 0){
        dataTag.push('data-markdown', 'data-template');
      }

      for(var j = 0; j < tags.length; j++){
        var tag = tags[j];
        if(tag === 'html') continue;
        else if(tag.indexOf(':') >= 0){
          tag = tag.replace(':', '="') + '"';
          dataTag.push('data-' + tag);
        }else{
          dataTag.push('data-' + tag);
        }
      }

      slide = slide.replace(matches[0], '');
    }else{
      dataTag.push('data-markdown', 'data-template');
    }



    var parsed = '<section ' + dataTag.join(' ') + '>';

    if(dataTag.indexOf('data-template') >= 0){
      parsed += '<script type="text/template">' + slide + '<'+'\/script>';
    }else{
      parsed += slide;
    }

    parsed += '</section>';

    slides[i] = parsed;
  }

  var container = document.getElementById('main');
  container.innerHTML = slides.join('');

  initReveal();
})();

</script>
<script src="/static/plugin/markdown/marked.js"></script>
<script src="/static/plugin/markdown/markdown.js"></script>
</html>